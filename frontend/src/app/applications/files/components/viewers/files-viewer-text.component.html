<!--
  ~ Copyright (C) 2012-2025 Johan Legrand <johan.legrand@sync-in.com>
  ~ This file is part of Sync-in | The open source file sync and share solution
  ~ See the LICENSE file for licensing details
  -->

<div [style.height.px]="currentHeight()">
  <div class="app-top-menu">
    <button
      (click)="toggleReadonly()"
      [tooltip]="(isReadonly() ? 'Read-only' : 'Read-write') | translate:locale.language"
      [adaptivePosition]="true"
      container="body"
      class="d-none d-sm-block btn btn-sm btn-secondary me-1"
      type="button"
      [disabled]="!isReadable()">
      <fa-icon [icon]="isReadonly() ? icons.faLock : icons.faLockOpen"></fa-icon>
    </button>
    <button
      (click)="save()"
      [tooltip]="'Save' | translate:locale.language"
      container="body"
      class="d-none d-sm-block btn btn-sm btn-secondary me-1"
      type="button"
      [disabled]="isReadonly() || !isModified()">
      @if (isSaving()) {
        <fa-icon [icon]="icons.faSpinner" animation="spin"></fa-icon>
      } @else {
        <fa-icon [icon]="icons.faFloppyDisk"></fa-icon>
      }
    </button>

    <button
      btnCheckbox
      [ngModel]="lineWrapping()"
      (ngModelChange)="lineWrapping.set($event)"
      [tooltip]="'Line Wrap' | translate:locale.language"
      container="body"
      class="d-none d-sm-block btn btn-sm btn-custom me-1"
      type="button">
      <fa-icon [icon]="icons.faArrowsLeftRightToLine"></fa-icon>
    </button>
    <button
      btnCheckbox
      [ngModel]="this.isSearchPanelOpen()"
      (ngModelChange)="toggleSearch()"
      [tooltip]="'Search' | translate:locale.language"
      container="body"
      class="d-none d-sm-block btn btn-sm btn-custom"
      type="button"
      [disabled]="!isReadable()">
      <fa-icon [icon]="icons.faMagnifyingGlass"></fa-icon>
    </button>
  </div>
  <code-editor
    #editor
    [autoFocus]="true"
    [languages]="languages"
    [language]="currentLanguage"
    [(ngModel)]="content"
    (change)="contentChange()"
    [theme]="currentTheme"
    [readonly]="isReadonly()"
    [lineWrapping]="lineWrapping()" />
</div>