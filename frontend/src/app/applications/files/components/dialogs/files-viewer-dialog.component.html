<!--
  ~ Copyright (C) 2012-2025 Johan Legrand <johan.legrand@sync-in.com>
  ~ This file is part of Sync-in | The open source file sync and share solution
  ~ See the LICENSE file for licensing details
  -->

<div class="modal-header">
  <h4 class="modal-title">
    <fa-icon [icon]="isReadonly() ? icons.faEye : icons.faPen"></fa-icon>
    <span class="ms-2">{{ currentFile.name }}</span>
  </h4>
  <button (click)="onMinimize()" aria-label="Minimize" class="btn-minimize btn-minimize-white" type="button"></button>
  <button (click)="onClose()" aria-label="Close" class="btn-close btn-close-white ms-3" type="button"></button>
</div>
@if (currentFile) {
  <div class="modal-body">
    @switch (hookedShortMime) {
      @case (SHORT_MIME.IMAGE) {
        <app-files-viewer-image [currentHeight]="currentHeight" [(file)]="currentFile" [directoryImages]="directoryImages()"></app-files-viewer-image>
      }
      @case (SHORT_MIME.PDF) {
        <app-files-viewer-pdf [currentHeight]="currentHeight" [fileUrl]="currentFile.dataUrl"></app-files-viewer-pdf>
      }
      @case (SHORT_MIME.MEDIA) {
        <app-files-viewer-media [currentHeight]="currentHeight" [fileUrl]="currentFile.dataUrl"></app-files-viewer-media>
      }
      @case (SHORT_MIME.DOCUMENT) {
        @if (store.fileSettings().editor.collaboraOnline) {
          <app-files-viewer-collabora-online [currentHeight]="currentHeight" [file]="currentFile" [(isReadonly)]="isReadonly"></app-files-viewer-collabora-online>
        } @else if (store.fileSettings().editor.onlyOffice) {
          <app-files-viewer-only-office [currentHeight]="currentHeight" [file]="currentFile" [(isReadonly)]="isReadonly"></app-files-viewer-only-office>
        } @else {
          <!--This case should never happen-->
          <div [style.height.px]="currentHeight" class="d-flex p-4" l10nTranslate>No editor found</div>
        }
      }
      @default {
        <app-files-viewer-text
          [currentHeight]="currentHeight"
          [file]="currentFile"
          [isWriteable]="isWriteable"
          [modalClosing]="modalClosing()"
          [(isReadonly)]="isReadonly">
        </app-files-viewer-text>
      }
    }
  </div>
}
